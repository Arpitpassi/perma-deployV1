<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PermaDeploy - Deploy to Arweave</title>
  <link rel="stylesheet" href="src/style.css">
</head>
<body>
  <div class="container">
    <div class="logo">PD</div>
    <div class="image-box"></div>
    <div class="meta-title" id="metaTitle">
      <div>PERMA</div>
      <div>DEPLOY</div>
    </div>
    <div class="subtitle" id="subtitle">
      DEPLOY TO<br>ARWEAVE
    </div>
    <canvas id="particleCanvas"></canvas>
    <div class="wallet-buttons">
      <div class="step-label">Step 1</div>
      <button class="wallet-btn" id="connectWalletBtn" onclick="initializeAndConnectWallet()">Connect Wallet</button>
      <button class="wallet-btn" id="disconnectWallet" style="display: none;" onclick="disconnectWallet()">Disconnect Wallet</button>
      <div class="wallet-status-text" id="walletConnectedText" style="display: none;">Wallet Connected</div>
    </div>
    <div class="generate-btn">
      <div class="step-label">Step 2</div>
      <button class="wallet-btn" id="generateCommandBtn">Generate Command</button>
    </div>
    <div class="configuration-form" id="configForm">
      <button class="close-btn" onclick="closeWindow()">×</button>
      <h2>Configure Project</h2>
      <div class="form-step active">
        <input type="text" id="branch" placeholder="Branch to deploy (e.g., main)">
        <input type="text" id="installCommand" placeholder="Install command (e.g., npm install)">
        <button class="wallet-btn" onclick="nextStep(0)">Next</button>
        <button class="wallet-btn" onclick="goBack(0)">Back</button>
      </div>
      <div class="form-step">
        <input type="text" id="buildCommand" placeholder="Build command (e.g., npm run build)">
        <button class="wallet-btn" onclick="nextStep(1)">Next</button>
        <button class="wallet-btn" onclick="goBack(1)">Back</button>
      </div>
      <div class="form-step">
        <label for="arnsNames">Select ARNS Name:</label>
        <select id="arnsNames">
          <option value="">Select an ARNS Name</option>
        </select>
        <input type="text" id="undername" placeholder="ARNS undername (optional, e.g., dev)">
        <button class="generate-btn-large" onclick="generateCommandWrapper()">Generate</button>
        <button class="wallet-btn" onclick="nextStep(2)">Next</button>
        <button class="wallet-btn" onclick="goBack(2)">Back</button>
      </div>
      <div class="form-step">
        <input type="text" id="projectWalletInput" placeholder="Paste project wallet address">
        <button class="wallet-btn" onclick="usePastedWallet()">Set Project Wallet</button>
        <p id="projectWalletDisplay"></p>
        <button class="wallet-btn" id="topUpButton" onclick="topUpWallet()" disabled>Top Up Project Wallet (0.1 AR)</button>
        <button class="wallet-btn" id="grantButton" onclick="grantControllerAccess()" disabled>Grant Controller Access</button>
        <button class="wallet-btn" onclick="goBack(3)">Back</button>
      </div>
    </div>
    <div class="command-output" id="commandOutputDiv">
      <button class="close-btn" onclick="closeWindow()">×</button>
      <h2>Generated Command</h2>
      <pre id="commandOutput"></pre>
      <button class="wallet-btn" onclick="copyCommand()">Copy Command</button>
      <pre id="seedOutput"></pre>
      <button class="wallet-btn" onclick="goToWalletOperations()">Wallet Operations</button>
      <button class="wallet-btn" onclick="goBack(4)">Back</button>
    </div>
    <p class="status-message" id="walletStatus"></p>
    <p class="status-message" id="status"></p>
    <div class="debug-panel" id="debugPanel"></div>
  </div>

  <script src="https://unpkg.com/arweave@latest/bundles/web.bundle.min.js"></script>
  <script src="dist/ar-io-bundle.js"></script>
  <script src="dist/aoconnect-bundle.js"></script>
  <script src="src/index.js"></script>
  <script src="src/indexx.js"></script>
</body>
</html>